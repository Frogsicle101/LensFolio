<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Lensfolio | Account</title>
    <!--/*/ <th:block th:include="fragments/general.html :: headerfiles">
            </th:block> /*/-->
</head>
<body>
<header th:insert="fragments/general.html :: header"></header>
<section class="accountBody">
    <div class="accountInfo">
        <form id="accountForm" method="post" th:action="@{edit/details}">

            <!--Below are the divs that handle error messages
            If there is an attribute with either "errorMessage", "successMessage", or "infoMessage,
            they will be displayed below-->
            <div th:insert="fragments/general.html :: errorBox"></div>
            <div th:insert="fragments/general.html :: successBox"></div>
            <div th:insert="fragments/general.html :: infoBox"></div>


            <h1>Personal Information</h1>
            <p class="required mandatoryMessage">Mandatory fields are marked with </p>


            <div class="row">

                <div class="col-sm order-sm-last">
                    <img alt="Your profile photo!" class="profilePic" id="accountPageImage"
                         th:src="${user.profileImagePath}">
                </div>

                <div class="col-sm order-sm-first">
                    <div class="mb-3">
                        <label class="required form-label" for="FirstName">First name</label>
                        <input class="form-control canDisable" disabled id="firstname" maxlength="50"
                               name="firstname" required
                               th:pattern="${alphaSpacesRegex}"
                               th:value="${user.getFirstName()}" title="Only letters A-Z upper or lowercase and , . ' or - allowed, names must be seperated by a space" type="text">
                    </div>

                    <div class="mb-3">
                        <label class="form-label" for="MiddleName">Middle name</label>
                        <input class="form-control canDisable" disabled id="middlename" maxlength="50"
                               name="middlename" th:pattern="${alphaSpacesRegexCanBeEmpty}"
                               th:value="${user.getMiddleName()}"
                               title="Only letters A-Z upper or lowercase and , . ' or - allowed, names must be seperated by a space" type="text">
                    </div>

                    <div class="mb-3">
                        <label class="required form-label" for="LastName">Last name</label>
                        <input class="form-control canDisable" disabled id="lastname" maxlength="50"
                               name="lastname" required
                               th:pattern="${alphaSpacesRegex}"
                               th:value="${user.getLastName()}" title="Only letters A-Z upper or lowercase and , . ' or - allowed, names must be seperated by a space" type="text">
                    </div>

                </div>
            </div>
            <div class="mb-3">
                <label class="form-label" for="nickname">Nickname</label>
                <input class="form-control canDisable" disabled id="nickname" maxlength="50"
                       name="nickname" th:pattern="${alphaSpacesRegexCanBeEmpty}"
                       th:value="${user.getNickname()}"
                       title="Only letters A-Z upper or lowercase and , . ' or - allowed, with words seperated by a space" type="text">
            </div>
            <div class="mb-3">
                <label class="required form-label" for="username">Username</label>
                <input class="form-control" disabled id="username" maxlength="50" name="username"
                       required
                       th:pattern="${userNameRegex}"
                       th:value="${user.getUsername()}" title="Cannot contain spaces or special characters other than !#$%&'*+-/=?^_`{|}~.," type="text">
            </div>
            <div class="mb-3">
                <label class="required form-label" for="email">Email address</label>
                <input class="form-control canDisable" disabled id="email" maxlength="100"
                       name="email" required
                       th:pattern="${emailRegex}"
                       th:value="${user.getEmail()}"
                       title="Cannot contain spaces, must match email conventions like 'name@something.something'" type="email">
            </div>
            <div class="mb-3">
                <div class="mb-3">
                    <label class="form-label" for="bio">User Bio</label>
                    <!-- The max length for fields in our database is, by default, somewhere just past 250
                    So going beyond 250 characters, even for a bio, runs the risk of errors -->
                    <textarea class="form-control canDisable" disabled id="bio" maxlength="250"
                              name="bio" th:text="${user.getBio()}"></textarea>
                </div>

            </div>
            <div class="row">
                <div class="col">
                    <label class="form-label" for="roles">Roles</label>
                    <input class="form-control" disabled id="roles" name="roles"
                           th:value="${#strings.listJoin(user.getRolesList(), ', ')}" type="text">
                </div>
                <div class="col">
                    <label class="form-label" for="personalPronouns">Pronouns</label>
                    <input class="form-control canDisable" disabled id="personalPronouns" maxlength="50"
                           name="personalPronouns" th:pattern="${pronounRegex}"
                           th:value="${user.getPersonalPronouns()}" title="Only letters A-Z upper or lowercase, pronouns must be seperated by a /"
                           type="text">
                </div>
            </div>
            <div class="mb-3">
                <p class="membersince" th:text="'Member since: ' + ${membersince}"></p>
            </div>
            <button class="btn btn-primary canDisable editUserSubmit" disabled style="display: none" type="submit">
                Submit
            </button>
            <button class="btn btn-secondary editUserButton" type="button">Edit Account</button>

        </form>
        <div class="passwordChangeDiv" style="display: none">
            <hr class="mt-3 mb-3">

            <form id="passwordChangeForm" method="post">
                <h1>Change Password</h1>

                <div class="errorMessageParentPassword alert alert-danger alert-dismissible fade show" role="alert"
                     style="display: none">
                    <p class="errorMessagePassword"></p>
                </div>

                <div class="mb-3">
                    <label class="form-label" for="OldPassword">Old password</label>
                    <input class="form-control" id="OldPassword" maxlength="100" name="old password"
                           required type="password">
                </div>
                <div class="mb-3">
                    <label class="form-label" for="NewPassword">New password</label>
                    <input class="form-control " id="NewPassword" maxlength="100" minlength="5"
                           name="new password"
                           required
                           th:pattern="${passwordRegex}" title="Cannot contain special characters other than !#$%&'*+-/=?^_`{|}~.," type="password">
                </div>
                <div class="mb-3">
                    <label class="form-label" for="ConfirmPassword">Confirm password</label>
                    <input class="form-control" id="ConfirmPassword" maxlength="100" minlength="5"
                           name="new password" required type="password">
                </div>
                <button class="btn btn-primary canDisablePassword editPasswordSubmit" type="submit">Submit</button>
            </form>
            <hr class="mt-3 mb-3">
            <div>
                <button class="btn btn-primary border uploadPhotoButton">Upload Profile Photo</button>
                <button class="btn btn-secondary border deleteProfilePhotoButton">Delete Profile Photo</button>
            </div>
        </div>


    </div>
</section>


<script th:src="@{js/account.js}" type="application/javascript"></script>
</body>
</html>